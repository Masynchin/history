# История моих репозиториев

Надеюсь кому-то будет интересно узнать, как создавались и развивались мои проекты

## assistypes (2020.08.06)

Мой первый репозиторий.

Увидев метод `.resize()` массивов numpy, я решил повторить это для стандартного списка.
В `StructuredList` я смог это реализовать, и он стал основой (и долгое время единственным классом) пакета assistypes.

Позже были добавлены ещё несколько классов, но после пакет перестал мною поддерживаться.

## CheWeatherBot (~2020.12.20)

Телеграм-бот для погоды моего родного города - Череповца.

У меня уже был небольшой опыт написания ботов (один для ВК), так что решившись писать их для ТГ, я решил изучить что-то новое.
Выбор пал на асинхронность, поэтому в качестве основы был выбран [aiogram](https://github.com/aiogram/aiogram)
(немалую роль в выборе сыграло и [это видео](https://www.youtube.com/watch?v=Kh16iosOTIQ)).

В первой версии был использован aiogram для ТГ, aiohttp для запросов к погодному сервису, sqlite для хранения данных подписчиков рассылки,
и небольшая библиотека [loguru](https://github.com/loguru/loguru) для логирования.

## CheWeatherBot 1.1 (2021.03.18-2021.04.27)

В качестве школьного проекта я решил выбрать `CheWeatherBot`, но с расширенным функционалом.

Вместо ручного парсинга JSON-ответа погодного сервера был использован [pydantic](https://github.com/samuelcolvin/pydantic).
С его помощью стало легче реализовать новые функции - получение погоды в конкретное время.

Бота я решил пристроить на heroku, чтобы я и другие люди могли им пользоваться в (почти) любое время.
Сначала под это была выделена новая ветвь с реализацией хранения данных в PostgreSQL (бесплатная БД на heroku)
через [psycopg2](https://github.com/psycopg/psycopg2). Спустя некоторое время я объединил хранение данных
с помощью [SQLAlchemy](https://github.com/sqlalchemy/sqlalchemy), и стало возможным удобно тестировать на собственном ноутбуке с SQLite,
а на heroku использовать PostgreSQL.

Спустя день после ввода SQLAlchemy в проект произошёл переход с синхронного на ассинхронный сервис хранения данных подписчиков рассылки.
Проект стал полностью асинхронным.

Тут же были применены и менее заметные улучшения - создание отдельной папки под .py файлы, написание докстрингов.

## SYB (2021.02.19-2021.04.24)

Итоговый проект в курсе Яндекс.Лицея.

Вместе с Сашей [@fuetser](https://github.com/fuetser) Захаручком нам предстояло выполнить проект на flask-стаке ([flask](https://github.com/pallets/flask), [flask-sqlalchemy](https://github.com/pallets/flask-sqlalchemy), [flask-restful](https://github.com/flask-restful/flask-restful)) + Bootstrap5.
Мы решили создать что-то наподобие реддита, и за два месяца смогли создать приложение с аутентификацией, категоризацией, публикацией...

Мы смогли реализовать базовые концепции соц.сетей - аккаунты, публикации, комментарии, лайки, поиск. Помимо основной работы над бекендом, Саша сильно помог с JS.
Моей же сверх-задачей были модели данных, создание и взаимодействие над ними (получение постов из подписок пользователя, алгоритм сортировки постов по нашей
системы оценок и т.д.).

Это был мой первый веб-проект и первое фулстак-приложение.

## Tasker (2021.05.12-2021.05.18)

Сразу после сдачи проекта для Яндекс.Лицея я захотел написал своё собственное веб-приложение.
В качестве идеи был выбран сам Яндекс.Лицей - площадка с курсами>задачами>уроками по программированию.

Изучая документацию aiohttp я заметил, что на нём можно писать не только клиентскую часть, но и серверную. Беря во внимание структуры предудыщего проекта,
я стал искать схожие компоненты - шаблонизацию ([aiohttp-jinja2](https://github.com/aio-libs/aiohttp-jinja2)),
сессии ([aiohttp-sessions](https://github.com/aio-libs/aiohttp-session))
и асинхронную ORM ([TortoiseORM](https://github.com/tortoise/tortoise-orm)).

За 60 часов в течение недели была создана рабочая версия.

## CheWeatherBot 1.2 (2021.07.18-2021.07.19)

После работы над другими проектами, я вернулся с небольшими исправлениями и техническими нововведениями.

Были добавлены [black](https://github.com/psf/black) и [flake8](https://github.com/PyCQA/flake8).
С их помощью код был немного почищен, а после улучшен более качественной документацией.

## Tasker 1.1 (2021.08.13-2021.09.01)

За три месяца после создания рабочей версии я узнал столько всего, что решил потратить всё своё время до начала учёбы на улучшение "Таскера".

С самого начала я видел места для рефакторинга, но не мог себе его позволить ввиду отсутствия тестов.

Я решил написать их, но для этого нужно было выполнить данный план:
- исправить стиль кода
- исправить незначительные огрехи кода
- подготовить архитектуру для тестирования

Введя pre-commit с моей базовой настройкой я начал исправить стиль кода. Была добавлена документация (увеличил строгость, теперь докстринги писались и к целым модулям),
единый формат кода, и были введены аннотации типов (перейдя с ST3 на VSCode, и попробовав работу со строго-типизированным языком,
я решил использовать их во всех следующих проектах).

Были исправлены огрехи разных калибров - начиная от замены if/elif на dict, заканчивая заменой метода маршрутизации проекта
с django-like таблицы путей на flask-like декораторы.

После этого я начал исправлять архитектуру приложения. Проблема была в том, что хоть и бизнес-сервисы были отделены от веб-хендлера,
в них была зависимость от aiohttp - передавались объекты запросов, форм и т.д. Исправив это, я написал тесты к сервисам (используя покрытие),
и благодаря этому улучшил часть запросов к БД, методы работы отдельных функций.
